<!DOCTYPE html>
<html>
<body>
<script>
	var arr =  new Array(3, 8, 0, 2, 1, 4);
	var result_arr = new Array();

	var front_arr = new Array();
	var back_arr = new Array();
	
	var scope = (Math.floor(arr.length/2)); //소숫점 버림, 정수형 반환

	var lenght = arr.length;
	var separate_length = 0;

	if(arr.length % 2 == 0) //배열의 값이 짝수인 경우
	{
		console.log("arr: " + arr);
		separate(scope, arr.length%2); // 분리
		merge(scope); //다시 합병
	}

	else  // if, length % 2 != 0 , 즉 배열의 값이 홀수인 경우
	{
		console.log("arr: " + arr);
		separate(scope, arr.length%2); // 분리
		sort(front_arr, front_arr.length);
		sort(back_arr, back_arr.length);
		//merge(scope); //다시 합병
	}

	function separate(scope, remainder){ //반으로 나눔
		var i;
		
		console.log("scope: " + scope);
		console.log("remainder: " + remainder);

		if(remainder == 0) //remainder = 나머지
		{
			for(i=0; i<scope; i++)
			{
				front_arr.push(arr[i]);
			}

			for(i=scope; i<arr.length; i++)
			{
				back_arr.push(arr[i]);
			}
		}

		else
		{
			for(i=0; i<scope+remainder; i++)
			{
				front_arr.push(arr[i]);
			}

			for(i=scope+remainder; i<arr.length; i++)
			{
				back_arr.push(arr[i]);
			}
		}

		// check
		console.log("front: " + front_arr);
		console.log("back: " + back_arr);
	}

	function sort(arr, max){ //bubble sort
		var i, loop, temp_data = 0;
	
		//console.log("___________here is sort function___________");
		for (loop = 0; loop <= max; loop++) 
		{
			for(i = 0; i <= max-loop; i++)
			{
				if(arr[i] > arr[i+1])
				{
					temp_data = arr[i];
					arr[i]  = arr[i+1];
					arr[i+1] = temp_data;
				}
				//console.log(i+ ") arr: " + arr + "  //  i+1= " + (i+1) );
			}
		}
		//console.log("____________________________________________");
	}

	function merge (scope) {
		var temp = scope;
		var arr_temp = 0;

		console.log("front_length: " + front_arr.length);
		console.log("back_length: "  + back_arr.length);
		console.log("temp: " + temp);

		if(scope % 2 == 0) //처음 주어진 arr 이 짝수인 경우.
		{

		}

		else  //if, scope%2 != 0
		{
			temp = front_arr.length;
			temp -= front_arr.length % 2;

			console.log("temp(front_length): " + temp);
			console.log("sort front : " + front_arr);
			sort(front_arr, temp);

			console.log("sort back : " + back_arr);
			sort(back_arr, temp);

			// 2. 비교, 합치는 과정

			var f = 0;
			var b = 0;
			console.log("--------------------");
			console.log("front_arr: " + front_arr);
			console.log("back_arr: " + back_arr);
			console.log("result_arr: " + result_arr);
			console.log("b: " + b + ", f: " + f);

			
			while(result_arr.length < arr.length)
			{
				console.log("--------------------");
				console.log("front_arr: " + front_arr);
				console.log("back_arr: " + back_arr);
				console.log("result_arr: " + result_arr);
				console.log("b: " + b + ", f: " + f);

				if(f > 2 && b==2) { result_arr.push(back_arr[b]);}
				if(b > 2 && f==2) { result_arr.push(front_arr[f]);}
 

				if(front_arr[f] > back_arr[b])
				{
					result_arr.push(back_arr[b]);
					b++; 
				}

				else if(back_arr[b] > front_arr[f])
				{
					result_arr.push(front_arr[f]);
					f++; 
				}
			}
			
			console.log("--------------------");
			console.log("final!! result_arr: " + result_arr);
		}
		
	}
</script>
</body>
</html>
